2026/01/09 10:03:12 üìÅ Loaded .env from ../../../../.env for tests
=== RUN   TestFlowExecutor_PasswordHashing
2026/01/09 10:03:12 ‚úÖ FlowExecutor: Registered handlers for 3 supported events
=== RUN   TestFlowExecutor_PasswordHashing/Should_hash_password_on_beforeCreate
2026/01/09 10:03:12 üîç FlowExecutor: checking 1 flows for trigger 'beforeCreate' on object '_System_User'
2026/01/09 10:03:12 üîÑ Flow Test_Password_Hash: executing UpdateRecord action on _System_User
2026/01/09 10:03:12 ‚úÖ Flow Test_Password_Hash: executed successfully
2026/01/09 10:03:12 Verified: SecurePass123! -> $2a$10$oFJkRsRoDOlXfg85gYOWuu3827o5gxcn7ZRWsEjLvoQ2pQYTr.5ii
--- PASS: TestFlowExecutor_PasswordHashing (0.10s)
    --- PASS: TestFlowExecutor_PasswordHashing/Should_hash_password_on_beforeCreate (0.10s)
=== RUN   TestFlowExecutor_HighPriorityAlert
2026/01/09 10:03:12 ‚úÖ FlowExecutor: Registered handlers for 3 supported events
=== RUN   TestFlowExecutor_HighPriorityAlert/Should_Trigger_Alert_on_High_Priority
2026/01/09 10:03:12 üîç FlowExecutor: checking 1 flows for trigger 'afterCreate' on object 'Ticket'
2026/01/09 10:03:12 üîÑ Flow High Priority Alert: executing CreateRecord action on Ticket
2026/01/09 10:03:12 ‚úÖ Flow High Priority Alert: executed successfully
=== RUN   TestFlowExecutor_HighPriorityAlert/Should_NOT_Trigger_Alert_on_Low_Priority
2026/01/09 10:03:12 üîç FlowExecutor: checking 1 flows for trigger 'afterCreate' on object 'Ticket'
--- PASS: TestFlowExecutor_HighPriorityAlert (0.00s)
    --- PASS: TestFlowExecutor_HighPriorityAlert/Should_Trigger_Alert_on_High_Priority (0.00s)
    --- PASS: TestFlowExecutor_HighPriorityAlert/Should_NOT_Trigger_Alert_on_Low_Priority (0.00s)
=== RUN   TestMasterDetail_CascadeDelete
2026/01/09 10:03:12 üìê Creating table: project_1767924192184250000
2026/01/09 10:03:12 üìù Executing DDL for project_1767924192184250000: 
CREATE TABLE IF NOT EXISTS `project_1767924192184250000` (
  `__sys_gen_id` VARCHAR(36) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `__sys_gen_owner_id` VARCHAR(36),
  `__sys_gen_created_by_id` VARCHAR(36),
  `__sys_gen_last_modified_by_id` VARCHAR(36),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for project_1767924192184250000
2026/01/09 10:03:12 ‚ö†Ô∏è An error occurred during registration. Rolling back table creation: project_1767924192184250000
    master_detail_test.go:85: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/master_detail_test.go:85
        	Error:      	Received unexpected error:
        	            	failed to register object (strict) project_1767924192184250000: Error 1054 (42S22): Unknown column 'object_api_name' in 'field list'
        	Test:       	TestMasterDetail_CascadeDelete
--- FAIL: TestMasterDetail_CascadeDelete (0.11s)
=== RUN   TestMetadataService_Apps_IsDefault
=== RUN   TestMetadataService_Apps_IsDefault/Create_App_With_Default
=== RUN   TestMetadataService_Apps_IsDefault/Update_App_To_Default
--- PASS: TestMetadataService_Apps_IsDefault (0.01s)
    --- PASS: TestMetadataService_Apps_IsDefault/Create_App_With_Default (0.01s)
    --- PASS: TestMetadataService_Apps_IsDefault/Update_App_To_Default (0.00s)
=== RUN   TestMetadataService_Objects_ThemeColor_Integration
2026/01/09 10:03:12 üìê Creating table: color_test_1767924192305619000
2026/01/09 10:03:12 üìù Executing DDL for color_test_1767924192305619000: 
CREATE TABLE IF NOT EXISTS `color_test_1767924192305619000` (
  `__sys_gen_id` VARCHAR(36) PRIMARY KEY,
  `__sys_gen_owner_id` VARCHAR(36),
  `__sys_gen_created_by_id` VARCHAR(36),
  `__sys_gen_last_modified_by_id` VARCHAR(36),
  `__sys_gen_created_date` DATETIME,
  `__sys_gen_last_modified_date` DATETIME,
  `__sys_gen_is_deleted` BOOLEAN,
  `name` VARCHAR(255)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for color_test_1767924192305619000
2026/01/09 10:03:12 ‚ö†Ô∏è An error occurred during registration. Rolling back table creation: color_test_1767924192305619000
    metadata_objects_test.go:47: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/metadata_objects_test.go:47
        	Error:      	Received unexpected error:
        	            	failed to create schema: failed to register object (strict) color_test_1767924192305619000: Error 1054 (42S22): Unknown column 'object_api_name' in 'field list'
        	Test:       	TestMetadataService_Objects_ThemeColor_Integration
    metadata_objects_test.go:56: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/metadata_objects_test.go:56
        	Error:      	Received unexpected error:
        	            	sql: no rows in result set
        	Test:       	TestMetadataService_Objects_ThemeColor_Integration
    metadata_objects_test.go:57: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/metadata_objects_test.go:57
        	Error:      	Not equal: 
        	            	expected: "#123456"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-#123456
        	            	+
        	Test:       	TestMetadataService_Objects_ThemeColor_Integration
        	Messages:   	Theme color should be persisted correctly
2026/01/09 10:03:12 üî• Dropping table: color_test_1767924192305619000
2026/01/09 10:03:12 ‚ö†Ô∏è  Warning: Failed to delete fields for object color_test_1767924192305619000: Error 1054 (42S22): Unknown column 'object_api_name' in 'where clause'
2026/01/09 10:03:12 ‚ö†Ô∏è  Warning: Failed to delete object metadata color_test_1767924192305619000: Error 1054 (42S22): Unknown column 'object_api_name' in 'where clause'
2026/01/09 10:03:12    ‚úÖ Table dropped and metadata cleaned: color_test_1767924192305619000
--- FAIL: TestMetadataService_Objects_ThemeColor_Integration (0.11s)
=== RUN   TestMetadataService_Themes_Integration
2026/01/09 10:03:12 ‚úÖ Theme activated: 01cc377c-21bb-4e13-8182-487d38bddbec
--- PASS: TestMetadataService_Themes_Integration (0.01s)
=== RUN   TestCheckObjectPermissionWithUser_NilUser
--- PASS: TestCheckObjectPermissionWithUser_NilUser (0.00s)
=== RUN   TestCheckObjectPermissionWithUser_SuperUser
--- PASS: TestCheckObjectPermissionWithUser_SuperUser (0.00s)
=== RUN   TestCheckFieldEditabilityWithUser_SystemField
--- PASS: TestCheckFieldEditabilityWithUser_SystemField (0.00s)
=== RUN   TestCheckFieldVisibilityWithUser_NilUser
--- PASS: TestCheckFieldVisibilityWithUser_NilUser (0.00s)
=== RUN   TestCheckFieldVisibilityWithUser_SuperUser
--- PASS: TestCheckFieldVisibilityWithUser_SuperUser (0.00s)
=== RUN   TestCheckPermissionOrErrorWithUser_NilUser
--- PASS: TestCheckPermissionOrErrorWithUser_NilUser (0.00s)
=== RUN   TestCheckPermissionOrErrorWithUser_SuperUser
--- PASS: TestCheckPermissionOrErrorWithUser_SuperUser (0.00s)
=== RUN   TestGetEffectiveSchema_NilSchema
--- PASS: TestGetEffectiveSchema_NilSchema (0.00s)
=== RUN   TestGetEffectiveSchema_SuperUser
--- PASS: TestGetEffectiveSchema_SuperUser (0.00s)
=== RUN   TestGetEffectiveSchema_NilUser
--- PASS: TestGetEffectiveSchema_NilUser (0.00s)
=== RUN   TestCheckRecordAccess_Owner
--- PASS: TestCheckRecordAccess_Owner (0.00s)
=== RUN   TestCheckRecordAccess_SuperUser
--- PASS: TestCheckRecordAccess_SuperUser (0.00s)
=== RUN   TestCheckRecordAccess_NoOwnerField
--- PASS: TestCheckRecordAccess_NoOwnerField (0.00s)
=== RUN   TestCheckRecordAccess_PointerOwner
--- PASS: TestCheckRecordAccess_PointerOwner (0.00s)
=== RUN   TestRollupSummary_Sum
2026/01/09 10:03:12 üìê Creating table: invoice_1767924192421301000
2026/01/09 10:03:12 üìù Executing DDL for invoice_1767924192421301000: 
CREATE TABLE IF NOT EXISTS `invoice_1767924192421301000` (
  `__sys_gen_id` VARCHAR(36) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `__sys_gen_owner_id` VARCHAR(36),
  `__sys_gen_created_by_id` VARCHAR(36),
  `__sys_gen_last_modified_by_id` VARCHAR(36),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `total_amount` VARCHAR(255)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for invoice_1767924192421301000
2026/01/09 10:03:12 ‚ö†Ô∏è An error occurred during registration. Rolling back table creation: invoice_1767924192421301000
    rollup_test.go:81: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/rollup_test.go:81
        	Error:      	Received unexpected error:
        	            	failed to register object (strict) invoice_1767924192421301000: Error 1054 (42S22): Unknown column 'object_api_name' in 'field list'
        	Test:       	TestRollupSummary_Sum
--- FAIL: TestRollupSummary_Sum (0.10s)
=== RUN   TestSchemaManager_Integration_ACID
    schema_manager_integration_test.go:61: Creating table test_acid_obj_1767924192524026000...
2026/01/09 10:03:12 üìê Creating table: test_acid_obj_1767924192524026000
2026/01/09 10:03:12 üìù Executing DDL for test_acid_obj_1767924192524026000: 
CREATE TABLE IF NOT EXISTS `test_acid_obj_1767924192524026000` (
  `__sys_gen_id` VARCHAR(36) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `amount` VARCHAR(255)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for test_acid_obj_1767924192524026000
2026/01/09 10:03:12 ‚ö†Ô∏è An error occurred during registration. Rolling back table creation: test_acid_obj_1767924192524026000
    schema_manager_integration_test.go:75: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:75
        	Error:      	Received unexpected error:
        	            	failed to register object (strict) test_acid_obj_1767924192524026000: Error 1054 (42S22): Unknown column 'object_api_name' in 'field list'
        	Test:       	TestSchemaManager_Integration_ACID
        	Messages:   	CreateTableWithStrictMetadata should succeed
    schema_manager_integration_test.go:84: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:84
        	Error:      	Not equal: 
        	            	expected: 1
        	            	actual  : 0
        	Test:       	TestSchemaManager_Integration_ACID
        	Messages:   	Physical table must exist in database
    schema_manager_integration_test.go:91: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:91
        	Error:      	Received unexpected error:
        	            	sql: no rows in result set
        	Test:       	TestSchemaManager_Integration_ACID
        	Messages:   	Object metadata must exist
    schema_manager_integration_test.go:92: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:92
        	Error:      	Should NOT be empty, but was 
        	Test:       	TestSchemaManager_Integration_ACID
    schema_manager_integration_test.go:93: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:93
        	Error:      	Should be true
        	Test:       	TestSchemaManager_Integration_ACID
        	Messages:   	Should be custom object
    schema_manager_integration_test.go:102: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:102
        	Error:      	Received unexpected error:
        	            	sql: no rows in result set
        	Test:       	TestSchemaManager_Integration_ACID
        	Messages:   	Field 'name' metadata must exist
    schema_manager_integration_test.go:103: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:103
        	Error:      	Not equal: 
        	            	expected: "Text"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Text
        	            	+
        	Test:       	TestSchemaManager_Integration_ACID
    schema_manager_integration_test.go:107: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:107
        	Error:      	Received unexpected error:
        	            	sql: no rows in result set
        	Test:       	TestSchemaManager_Integration_ACID
        	Messages:   	Field 'amount' metadata must exist
    schema_manager_integration_test.go:108: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:108
        	Error:      	Not equal: 
        	            	expected: "Currency"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Currency
        	            	+
        	Test:       	TestSchemaManager_Integration_ACID
    schema_manager_integration_test.go:113: 
        	Error Trace:	/Users/qiliu/projects/nexuscrm/backend/internal/application/services/schema_manager_integration_test.go:113
        	Error:      	Received unexpected error:
        	            	sql: no rows in result set
        	Test:       	TestSchemaManager_Integration_ACID
        	Messages:   	System field 'id' metadata must exist
    schema_manager_integration_test.go:115: ‚úÖ Integration Test Passed: Table and Metadata created correctly.
2026/01/09 10:03:12 üî• Dropping table: test_acid_obj_1767924192524026000
2026/01/09 10:03:12 ‚ö†Ô∏è  Warning: Failed to delete fields for object test_acid_obj_1767924192524026000: Error 1054 (42S22): Unknown column 'object_api_name' in 'where clause'
2026/01/09 10:03:12 ‚ö†Ô∏è  Warning: Failed to delete object metadata test_acid_obj_1767924192524026000: Error 1054 (42S22): Unknown column 'object_api_name' in 'where clause'
2026/01/09 10:03:12    ‚úÖ Table dropped and metadata cleaned: test_acid_obj_1767924192524026000
--- FAIL: TestSchemaManager_Integration_ACID (0.11s)
=== RUN   TestValidationService_ValidateRecord
=== RUN   TestValidationService_ValidateRecord/Valid_Record
=== RUN   TestValidationService_ValidateRecord/Missing_Required
=== RUN   TestValidationService_ValidateRecord/Too_Young
=== RUN   TestValidationService_ValidateRecord/Invalid_Regex
=== RUN   TestValidationService_ValidateRecord/Validation_Rule_Failure
--- PASS: TestValidationService_ValidateRecord (0.00s)
    --- PASS: TestValidationService_ValidateRecord/Valid_Record (0.00s)
    --- PASS: TestValidationService_ValidateRecord/Missing_Required (0.00s)
    --- PASS: TestValidationService_ValidateRecord/Too_Young (0.00s)
    --- PASS: TestValidationService_ValidateRecord/Invalid_Regex (0.00s)
    --- PASS: TestValidationService_ValidateRecord/Validation_Rule_Failure (0.00s)
=== RUN   TestValidationService_NullKeyword
=== RUN   TestValidationService_NullKeyword/Null_keyword_works_with_nil_value
=== RUN   TestValidationService_NullKeyword/Null_keyword_works_with_present_value
=== RUN   TestValidationService_NullKeyword/Not_null_check_works
--- PASS: TestValidationService_NullKeyword (0.00s)
    --- PASS: TestValidationService_NullKeyword/Null_keyword_works_with_nil_value (0.00s)
    --- PASS: TestValidationService_NullKeyword/Null_keyword_works_with_present_value (0.00s)
    --- PASS: TestValidationService_NullKeyword/Not_null_check_works (0.00s)
=== RUN   TestValidationService_EmptyStringNormalization
=== RUN   TestValidationService_EmptyStringNormalization/Empty_date_string_treated_as_null
=== RUN   TestValidationService_EmptyStringNormalization/Empty_number_string_treated_as_null
=== RUN   TestValidationService_EmptyStringNormalization/Empty_text_string_NOT_treated_as_null_(preserved)
--- PASS: TestValidationService_EmptyStringNormalization (0.00s)
    --- PASS: TestValidationService_EmptyStringNormalization/Empty_date_string_treated_as_null (0.00s)
    --- PASS: TestValidationService_EmptyStringNormalization/Empty_number_string_treated_as_null (0.00s)
    --- PASS: TestValidationService_EmptyStringNormalization/Empty_text_string_NOT_treated_as_null_(preserved) (0.00s)
=== RUN   TestValidationService_FailClosed
=== RUN   TestValidationService_FailClosed/Syntax_error_causes_internal_error
=== RUN   TestValidationService_FailClosed/Inactive_rules_are_skipped_even_with_bad_syntax
=== RUN   TestValidationService_FailClosed/Valid_rule_that_passes
=== RUN   TestValidationService_FailClosed/Valid_rule_that_triggers
--- PASS: TestValidationService_FailClosed (0.00s)
    --- PASS: TestValidationService_FailClosed/Syntax_error_causes_internal_error (0.00s)
    --- PASS: TestValidationService_FailClosed/Inactive_rules_are_skipped_even_with_bad_syntax (0.00s)
    --- PASS: TestValidationService_FailClosed/Valid_rule_that_passes (0.00s)
    --- PASS: TestValidationService_FailClosed/Valid_rule_that_triggers (0.00s)
=== RUN   TestValidationService_ValidateFlow
=== RUN   TestValidationService_ValidateFlow/Allow_different_trigger_type
=== RUN   TestValidationService_ValidateFlow/Allow_different_object
=== RUN   TestValidationService_ValidateFlow/Deny_duplicate_trigger
=== RUN   TestValidationService_ValidateFlow/Allow_self_update
=== RUN   TestValidationService_ValidateFlow/Allow_duplicate_if_inactive
--- PASS: TestValidationService_ValidateFlow (0.00s)
    --- PASS: TestValidationService_ValidateFlow/Allow_different_trigger_type (0.00s)
    --- PASS: TestValidationService_ValidateFlow/Allow_different_object (0.00s)
    --- PASS: TestValidationService_ValidateFlow/Deny_duplicate_trigger (0.00s)
    --- PASS: TestValidationService_ValidateFlow/Allow_self_update (0.00s)
    --- PASS: TestValidationService_ValidateFlow/Allow_duplicate_if_inactive (0.00s)
=== RUN   TestValidationService_Naming
=== RUN   TestValidationService_Naming/Object_Valid
=== RUN   TestValidationService_Naming/Field_Valid
=== RUN   TestValidationService_Naming/Object_CamelCase
=== RUN   TestValidationService_Naming/Field_CamelCase
=== RUN   TestValidationService_Naming/Object_Spaces
=== RUN   TestValidationService_Naming/Field_Spaces
=== RUN   TestValidationService_Naming/Object_Dashes
=== RUN   TestValidationService_Naming/Field_Dashes
=== RUN   TestValidationService_Naming/Object_StartNum
=== RUN   TestValidationService_Naming/Field_StartNum
--- PASS: TestValidationService_Naming (0.00s)
    --- PASS: TestValidationService_Naming/Object_Valid (0.00s)
    --- PASS: TestValidationService_Naming/Field_Valid (0.00s)
    --- PASS: TestValidationService_Naming/Object_CamelCase (0.00s)
    --- PASS: TestValidationService_Naming/Field_CamelCase (0.00s)
    --- PASS: TestValidationService_Naming/Object_Spaces (0.00s)
    --- PASS: TestValidationService_Naming/Field_Spaces (0.00s)
    --- PASS: TestValidationService_Naming/Object_Dashes (0.00s)
    --- PASS: TestValidationService_Naming/Field_Dashes (0.00s)
    --- PASS: TestValidationService_Naming/Object_StartNum (0.00s)
    --- PASS: TestValidationService_Naming/Field_StartNum (0.00s)
=== RUN   TestFormulaFields_Integration
2026/01/09 10:03:12 üìê Creating table: product_1767924192637392000
2026/01/09 10:03:12 üìù Executing DDL for product_1767924192637392000: 
CREATE TABLE IF NOT EXISTS `product_1767924192637392000` (
  `__sys_gen_id` VARCHAR(36) PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `__sys_gen_owner_id` VARCHAR(36),
  `__sys_gen_created_by_id` VARCHAR(36),
  `__sys_gen_last_modified_by_id` VARCHAR(36),
  `__sys_gen_created_date` DATETIME,
  `__sys_gen_last_modified_date` DATETIME,
  `__sys_gen_is_deleted` BOOLEAN
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for product_1767924192637392000
2026/01/09 10:03:12 ‚ö†Ô∏è An error occurred during registration. Rolling back table creation: product_1767924192637392000
    formula_integration_test.go:75: Failed to create object: failed to create schema via SchemaManager: failed to register object (strict) product_1767924192637392000: Error 1054 (42S22): Unknown column 'object_api_name' in 'field list'
--- FAIL: TestFormulaFields_Integration (0.10s)
=== RUN   TestFormulaValidation
2026/01/09 10:03:12 üìê Creating table: formula_validation_1767924192736745000
2026/01/09 10:03:12 üìù Executing DDL for formula_validation_1767924192736745000: 
CREATE TABLE IF NOT EXISTS `formula_validation_1767924192736745000` (
  `__sys_gen_id` VARCHAR(36) PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `__sys_gen_owner_id` VARCHAR(36),
  `__sys_gen_created_by_id` VARCHAR(36),
  `__sys_gen_last_modified_by_id` VARCHAR(36),
  `__sys_gen_created_date` DATETIME,
  `__sys_gen_last_modified_date` DATETIME,
  `__sys_gen_is_deleted` BOOLEAN
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for formula_validation_1767924192736745000
2026/01/09 10:03:12 ‚ö†Ô∏è An error occurred during registration. Rolling back table creation: formula_validation_1767924192736745000
    formula_integration_test.go:312: Failed to create object: failed to create schema via SchemaManager: failed to register object (strict) formula_validation_1767924192736745000: Error 1054 (42S22): Unknown column 'object_api_name' in 'field list'
--- FAIL: TestFormulaValidation (0.11s)
=== RUN   TestPersistenceService_Integration
2026/01/09 10:03:12 üîß Initializing core system schema...
2026/01/09 10:03:12 üß± Pre-creating physical table: _System_Table
2026/01/09 10:03:12 üìê Creating table: _System_Table
2026/01/09 10:03:12 üìù Executing DDL for _System_Table: 
CREATE TABLE IF NOT EXISTS `_System_Table` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `table_name` VARCHAR(255) NOT NULL UNIQUE,
  `table_type` VARCHAR(255) NOT NULL,
  `category` VARCHAR(50) NOT NULL,
  `description` TEXT NOT NULL,
  `is_managed` TINYINT(1) NOT NULL DEFAULT 1,
  `schema_version` VARCHAR(50) NOT NULL DEFAULT '1.0.0',
  `created_by` VARCHAR(255) NOT NULL DEFAULT 'bootstrap',
  `__sys_gen_created_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `__sys_gen_last_modified_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  KEY `idx__System_Table_table_type` (`table_type`),
  KEY `idx__System_Table_category` (`category`),
  KEY `idx__System_Table_is_managed` (`is_managed`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Table
2026/01/09 10:03:12 üß± Pre-creating physical table: _System_Object
2026/01/09 10:03:12 üìê Creating table: _System_Object
2026/01/09 10:03:12 üìù Executing DDL for _System_Object: 
CREATE TABLE IF NOT EXISTS `_System_Object` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `api_name` VARCHAR(255) NOT NULL UNIQUE,
  `table_type` VARCHAR(50) NOT NULL DEFAULT 'custom_object',
  `label` VARCHAR(255) NOT NULL UNIQUE,
  `plural_label` VARCHAR(255),
  `app_id` VARCHAR(255),
  `icon` VARCHAR(255),
  `description` TEXT NOT NULL,
  `theme_color` VARCHAR(255),
  `is_custom` TINYINT(1) NOT NULL DEFAULT 0,
  `sharing_model` VARCHAR(50) NOT NULL DEFAULT 'ReadWrite',
  `path_field` VARCHAR(255),
  `list_fields` JSON,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `__sys_gen_last_modified_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  KEY `idx__System_Object_is_custom` (`is_custom`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Object
2026/01/09 10:03:12 üß± Pre-creating physical table: _System_Field
2026/01/09 10:03:12 üìê Creating table: _System_Field
2026/01/09 10:03:12 üìù Executing DDL for _System_Field: 
CREATE TABLE IF NOT EXISTS `_System_Field` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_id` VARCHAR(255) NOT NULL,
  `api_name` VARCHAR(255) NOT NULL,
  `label` VARCHAR(255) NOT NULL,
  `type` VARCHAR(50) NOT NULL,
  `required` TINYINT(1) NOT NULL DEFAULT 0,
  `is_unique` TINYINT(1) NOT NULL DEFAULT 0,
  `is_system` TINYINT(1) NOT NULL DEFAULT 0,
  `is_name_field` TINYINT(1) NOT NULL DEFAULT 0,
  `indexed` TINYINT(1) NOT NULL DEFAULT 0,
  `options` JSON,
  `reference_to` JSON,
  `delete_rule` VARCHAR(50),
  `formula` TEXT,
  `return_type` VARCHAR(50),
  `default_value` TEXT,
  `help_text` TEXT,
  `description` TEXT,
  `track_history` TINYINT(1) NOT NULL DEFAULT 0,
  `min_value` VARCHAR(255),
  `max_value` VARCHAR(255),
  `min_length` INT,
  `max_length` INT,
  `regex` TEXT,
  `regex_message` TEXT,
  `validator` TEXT,
  `controlling_field` VARCHAR(255),
  `picklist_dependency` JSON,
  `rollup_config` JSON,
  `is_master_detail` TINYINT(1) NOT NULL DEFAULT 0,
  `is_polymorphic` TINYINT(1) NOT NULL DEFAULT 0,
  `relationship_name` VARCHAR(255),
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `__sys_gen_last_modified_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  KEY `idx__System_Field_object_id` (`object_id`),
  KEY `idx__System_Field_type` (`type`),
  UNIQUE KEY `idx__System_Field_object_id_api_name` (`object_id`, `api_name`),
  FOREIGN KEY (`object_id`) REFERENCES _System_Object(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Field
2026/01/09 10:03:12 ‚ö°Ô∏è Creating tables and registering (Super Batch)...
2026/01/09 10:03:12 üöÄ Starting parallel DDL for 46 tables...
2026/01/09 10:03:12 üìê Creating table: _System_Role
2026/01/09 10:03:12 üìê Creating table: _System_Profile
2026/01/09 10:03:12 üìê Creating table: _System_Dashboard
2026/01/09 10:03:12 üìê Creating table: _System_AI_Conversation
2026/01/09 10:03:12 üìê Creating table: _System_RecordType
2026/01/09 10:03:12 üìê Creating table: _System_AutoNumber
2026/01/09 10:03:12 üìê Creating table: _System_App
2026/01/09 10:03:12 üìê Creating table: _System_Comment
2026/01/09 10:03:12 üìê Creating table: _System_FieldPerms
2026/01/09 10:03:12 üìê Creating table: _System_PermissionSetAssignment
2026/01/09 10:03:12 üìù Executing DDL for _System_Dashboard: 
CREATE TABLE IF NOT EXISTS `_System_Dashboard` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `description` TEXT NOT NULL,
  `layout` VARCHAR(50) NOT NULL DEFAULT 'two-column',
  `widgets` JSON NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_last_modified_date` DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Dashboard
2026/01/09 10:03:12 üìê Creating table: _System_User
2026/01/09 10:03:12 üìù Executing DDL for _System_User: 
CREATE TABLE IF NOT EXISTS `_System_User` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `username` VARCHAR(255) NOT NULL UNIQUE,
  `email` VARCHAR(255) NOT NULL UNIQUE,
  `password` VARCHAR(255) NOT NULL,
  `first_name` VARCHAR(255) NOT NULL,
  `last_name` VARCHAR(255) NOT NULL,
  `phone` VARCHAR(255),
  `profile_id` VARCHAR(255) NOT NULL,
  `role_id` VARCHAR(255),
  `is_active` TINYINT(1) NOT NULL DEFAULT 1,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `last_login_date` DATETIME,
  `__sys_gen_created_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `__sys_gen_last_modified_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  KEY `idx__System_User_profile_id` (`profile_id`),
  KEY `idx__System_User_role_id` (`role_id`),
  FOREIGN KEY (`profile_id`) REFERENCES _System_Profile(__sys_gen_id),
  FOREIGN KEY (`role_id`) REFERENCES _System_Role(__sys_gen_id) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_AutoNumber: 
CREATE TABLE IF NOT EXISTS `_System_AutoNumber` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `field_api_name` VARCHAR(255) NOT NULL,
  `display_format` VARCHAR(255) NOT NULL,
  `starting_number` INT NOT NULL DEFAULT 1,
  `current_number` INT NOT NULL DEFAULT 0,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  UNIQUE KEY `idx__System_AutoNumber_object_api_name_field_api_name` (`object_api_name`, `field_api_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_Profile: 
CREATE TABLE IF NOT EXISTS `_System_Profile` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `description` TEXT NOT NULL,
  `is_active` TINYINT(1) NOT NULL DEFAULT 1,
  `is_system` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `__sys_gen_last_modified_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_Role: 
CREATE TABLE IF NOT EXISTS `_System_Role` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `description` TEXT NOT NULL,
  `parent_role_id` VARCHAR(255),
  `is_active` TINYINT(1) NOT NULL DEFAULT 1,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `__sys_gen_last_modified_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  KEY `idx__System_Role_parent_role_id` (`parent_role_id`),
  FOREIGN KEY (`parent_role_id`) REFERENCES _System_Role(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_AI_Conversation: 
CREATE TABLE IF NOT EXISTS `_System_AI_Conversation` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `user_id` VARCHAR(255) NOT NULL,
  `title` VARCHAR(255) NOT NULL DEFAULT 'AI Conversation',
  `messages` JSON NOT NULL,
  `is_active` BOOLEAN NOT NULL DEFAULT 1,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_App: 
CREATE TABLE IF NOT EXISTS `_System_App` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `label` VARCHAR(255) NOT NULL UNIQUE,
  `description` TEXT NOT NULL,
  `icon` VARCHAR(50) NOT NULL,
  `color` VARCHAR(50) NOT NULL,
  `navigation_items` JSON NOT NULL,
  `is_default` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_RecordType: 
CREATE TABLE IF NOT EXISTS `_System_RecordType` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_id` VARCHAR(255) NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `description` TEXT NOT NULL,
  `is_active` TINYINT(1) NOT NULL DEFAULT 1,
  `is_master` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_RecordType_object_id` (`object_id`),
  UNIQUE KEY `idx__System_RecordType_object_id_name` (`object_id`, `name`),
  FOREIGN KEY (`object_id`) REFERENCES _System_Object(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_FieldPerms: 
CREATE TABLE IF NOT EXISTS `_System_FieldPerms` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `profile_id` VARCHAR(255),
  `permission_set_id` VARCHAR(255),
  `object_api_name` VARCHAR(255) NOT NULL,
  `field_api_name` VARCHAR(255) NOT NULL,
  `readable` TINYINT(1) NOT NULL DEFAULT 0,
  `editable` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  UNIQUE KEY `idx__System_FieldPerms_profile_id_object_api_name_field_api_name` (`profile_id`, `object_api_name`, `field_api_name`),
  UNIQUE KEY `idx_fieldperms_permset` (`permission_set_id`, `object_api_name`, `field_api_name`),
  FOREIGN KEY (`profile_id`) REFERENCES _System_Profile(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`permission_set_id`) REFERENCES _System_PermissionSet(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_Comment: 
CREATE TABLE IF NOT EXISTS `_System_Comment` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `record_id` VARCHAR(255) NOT NULL,
  `body` TEXT NOT NULL,
  `__sys_gen_created_by_id` VARCHAR(255) NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `parent_comment_id` VARCHAR(255),
  `is_resolved` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Comment_object_api_name_record_id` (`object_api_name`, `record_id`),
  KEY `idx__System_Comment___sys_gen_created_by_id` (`__sys_gen_created_by_id`),
  KEY `idx__System_Comment_parent_comment_id` (`parent_comment_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_PermissionSetAssignment: 
CREATE TABLE IF NOT EXISTS `_System_PermissionSetAssignment` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `assignee_id` VARCHAR(255) NOT NULL,
  `permission_set_id` VARCHAR(255) NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  UNIQUE KEY `idx_psa_assignee_permset` (`assignee_id`, `permission_set_id`),
  FOREIGN KEY (`assignee_id`) REFERENCES _System_User(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`permission_set_id`) REFERENCES _System_PermissionSet(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_User
2026/01/09 10:03:12 üìê Creating table: _System_Webhook
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_AutoNumber
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_AI_Conversation
2026/01/09 10:03:12 üìê Creating table: _System_OutboxEvent
2026/01/09 10:03:12 üìê Creating table: _System_UIComponent
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_App
2026/01/09 10:03:12 üìê Creating table: _System_RecordShare
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Role
2026/01/09 10:03:12 üìê Creating table: _System_TeamMember
2026/01/09 10:03:12 üìù Executing DDL for _System_Webhook: 
CREATE TABLE IF NOT EXISTS `_System_Webhook` (
  `__sys_gen_id` VARCHAR(36) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `url` VARCHAR(255) NOT NULL,
  `method` VARCHAR(255) NOT NULL DEFAULT 'POST',
  `headers` TEXT NOT NULL,
  `auth_type` VARCHAR(50) NOT NULL,
  `auth_config` TEXT NOT NULL,
  `is_active` TINYINT(1) NOT NULL DEFAULT 1,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Profile
2026/01/09 10:03:12 üìê Creating table: _System_ApprovalProcess
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_PermissionSetAssignment
2026/01/09 10:03:12 üìê Creating table: _System_ApprovalWorkItem
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_RecordType
2026/01/09 10:03:12 üìê Creating table: _System_AuditLog
2026/01/09 10:03:12 üìù Executing DDL for _System_OutboxEvent: 
CREATE TABLE IF NOT EXISTS `_System_OutboxEvent` (
  `__sys_gen_id` VARCHAR(36) NOT NULL PRIMARY KEY,
  `event_type` VARCHAR(255) NOT NULL,
  `payload` JSON NOT NULL,
  `status` VARCHAR(255) NOT NULL DEFAULT 'pending',
  `retry_count` INT NOT NULL DEFAULT 0,
  `error_message` TEXT,
  `processed_date` DATETIME,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx_outbox_pending` (`status`, `__sys_gen_created_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_UIComponent: 
CREATE TABLE IF NOT EXISTS `_System_UIComponent` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `type` VARCHAR(50) NOT NULL DEFAULT 'page',
  `is_embeddable` TINYINT(1) NOT NULL DEFAULT 0,
  `description` TEXT NOT NULL,
  `component_path` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_UIComponent_is_embeddable` (`is_embeddable`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_RecordShare: 
CREATE TABLE IF NOT EXISTS `_System_RecordShare` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `record_id` VARCHAR(255) NOT NULL,
  `share_with_user_id` VARCHAR(255),
  `share_with_group_id` VARCHAR(255),
  `access_level` VARCHAR(50) NOT NULL DEFAULT 'Read',
  `reason` VARCHAR(50) NOT NULL DEFAULT 'Manual',
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_last_modified_date` DATETIME,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  KEY `idx_recordshare_record` (`object_api_name`, `record_id`),
  KEY `idx_recordshare_user` (`share_with_user_id`),
  KEY `idx_recordshare_group` (`share_with_group_id`),
  FOREIGN KEY (`share_with_user_id`) REFERENCES _System_User(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`share_with_group_id`) REFERENCES _System_Group(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Webhook
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Comment
2026/01/09 10:03:12 üìù Executing DDL for _System_TeamMember: 
CREATE TABLE IF NOT EXISTS `_System_TeamMember` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `record_id` VARCHAR(255) NOT NULL,
  `user_id` VARCHAR(255) NOT NULL,
  `team_role` VARCHAR(255) NOT NULL DEFAULT 'Team Member',
  `access_level` VARCHAR(50) NOT NULL DEFAULT 'Read',
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_last_modified_date` DATETIME,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  KEY `idx_teammember_record` (`object_api_name`, `record_id`),
  KEY `idx_teammember_user` (`user_id`),
  UNIQUE KEY `idx_teammember_unique` (`object_api_name`, `record_id`, `user_id`),
  FOREIGN KEY (`user_id`) REFERENCES _System_User(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_ApprovalProcess: 
CREATE TABLE IF NOT EXISTS `_System_ApprovalProcess` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `object_api_name` VARCHAR(255) NOT NULL,
  `description` TEXT,
  `entry_criteria` TEXT,
  `approver_type` VARCHAR(50) NOT NULL DEFAULT 'User',
  `approver_id` VARCHAR(255),
  `is_active` TINYINT(1) NOT NULL DEFAULT 1,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_last_modified_date` DATETIME,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  KEY `idx_approvalprocess_object` (`object_api_name`),
  UNIQUE KEY `idx_approvalprocess_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_FieldPerms
2026/01/09 10:03:12 üìù Executing DDL for _System_ApprovalWorkItem: 
CREATE TABLE IF NOT EXISTS `_System_ApprovalWorkItem` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `process_id` VARCHAR(255) NOT NULL,
  `flow_instance_id` VARCHAR(255),
  `flow_step_id` VARCHAR(255),
  `object_api_name` VARCHAR(255) NOT NULL,
  `record_id` VARCHAR(255) NOT NULL,
  `status` VARCHAR(50) NOT NULL DEFAULT 'Pending',
  `submitted_by_id` VARCHAR(255),
  `submitted_date` DATETIME NOT NULL,
  `approver_id` VARCHAR(255),
  `approved_by_id` VARCHAR(255),
  `approved_date` DATETIME,
  `comments` TEXT,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_last_modified_date` DATETIME,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  KEY `idx_approvalworkitem_process` (`process_id`),
  KEY `idx_approvalworkitem_record` (`object_api_name`, `record_id`),
  KEY `idx_approvalworkitem_status` (`status`),
  KEY `idx_approvalworkitem_approver` (`approver_id`),
  FOREIGN KEY (`process_id`) REFERENCES _System_ApprovalProcess(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`submitted_by_id`) REFERENCES _System_User(__sys_gen_id) ON DELETE SET NULL,
  FOREIGN KEY (`approver_id`) REFERENCES _System_User(__sys_gen_id) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìê Creating table: _System_SystemLog
2026/01/09 10:03:12 üìê Creating table: _System_Notification
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_UIComponent
2026/01/09 10:03:12 üìê Creating table: _System_Group
2026/01/09 10:03:12 üìê Creating table: _System_File
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_OutboxEvent
2026/01/09 10:03:12 üìù Executing DDL for _System_AuditLog: 
CREATE TABLE IF NOT EXISTS `_System_AuditLog` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `record_id` VARCHAR(255) NOT NULL,
  `field_name` VARCHAR(255) NOT NULL,
  `old_value` LONGTEXT NOT NULL,
  `new_value` LONGTEXT NOT NULL,
  `changed_by_id` VARCHAR(255) NOT NULL,
  `changed_at` DATETIME NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_AuditLog_object_api_name_record_id` (`object_api_name`, `record_id`),
  KEY `idx__System_AuditLog_changed_at` (`changed_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_SystemLog: 
CREATE TABLE IF NOT EXISTS `_System_SystemLog` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `timestamp` DATETIME NOT NULL,
  `level` VARCHAR(50) NOT NULL,
  `source` VARCHAR(255) NOT NULL,
  `message` TEXT NOT NULL,
  `details` TEXT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìê Creating table: _System_GroupMember
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_TeamMember
2026/01/09 10:03:12 üìê Creating table: _System_PermissionSet
2026/01/09 10:03:12 üìù Executing DDL for _System_Notification: 
CREATE TABLE IF NOT EXISTS `_System_Notification` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `recipient_id` VARCHAR(255) NOT NULL,
  `title` VARCHAR(255) NOT NULL,
  `body` TEXT NOT NULL,
  `link` VARCHAR(255) NOT NULL,
  `is_read` TINYINT(1) NOT NULL,
  `notification_type` VARCHAR(50) NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Notification_recipient_id` (`recipient_id`),
  KEY `idx__System_Notification_is_read` (`is_read`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_ApprovalProcess
2026/01/09 10:03:12 üìê Creating table: _System_Session
2026/01/09 10:03:12 üìù Executing DDL for _System_Group: 
CREATE TABLE IF NOT EXISTS `_System_Group` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `label` VARCHAR(255) NOT NULL UNIQUE,
  `type` VARCHAR(255) NOT NULL DEFAULT 'Regular',
  `email` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_last_modified_date` DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_File: 
CREATE TABLE IF NOT EXISTS `_System_File` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `parent_id` VARCHAR(255) NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `mime_type` VARCHAR(255) NOT NULL,
  `size_bytes` BIGINT NOT NULL DEFAULT 0,
  `storage_path` VARCHAR(255) NOT NULL,
  `__sys_gen_created_by_id` VARCHAR(255) NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_File_parent_id` (`parent_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_RecordShare
2026/01/09 10:03:12 üìê Creating table: _System_FlowInstance
2026/01/09 10:03:12 üìù Executing DDL for _System_PermissionSet: 
CREATE TABLE IF NOT EXISTS `_System_PermissionSet` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `label` VARCHAR(255) NOT NULL UNIQUE,
  `description` TEXT NOT NULL,
  `is_active` TINYINT(1) NOT NULL DEFAULT 1,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_last_modified_date` DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_GroupMember: 
CREATE TABLE IF NOT EXISTS `_System_GroupMember` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `group_id` VARCHAR(255) NOT NULL,
  `user_id` VARCHAR(255) NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  UNIQUE KEY `idx__System_GroupMember_group_id_user_id` (`group_id`, `user_id`),
  FOREIGN KEY (`group_id`) REFERENCES _System_Group(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`user_id`) REFERENCES _System_User(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_Session: 
CREATE TABLE IF NOT EXISTS `_System_Session` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `user_id` VARCHAR(255) NOT NULL,
  `token` VARCHAR(750) NOT NULL UNIQUE,
  `expires_at` DATETIME NOT NULL,
  `last_activity` DATETIME NOT NULL,
  `ip_address` VARCHAR(255) NOT NULL,
  `user_agent` VARCHAR(255) NOT NULL,
  `is_revoked` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Session_user_id` (`user_id`),
  KEY `idx__System_Session_expires_at` (`expires_at`),
  FOREIGN KEY (`user_id`) REFERENCES _System_User(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_ApprovalWorkItem
2026/01/09 10:03:12 üìù Executing DDL for _System_FlowInstance: 
CREATE TABLE IF NOT EXISTS `_System_FlowInstance` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `flow_id` VARCHAR(255) NOT NULL,
  `object_api_name` VARCHAR(255) NOT NULL,
  `record_id` VARCHAR(255) NOT NULL,
  `status` VARCHAR(50) NOT NULL DEFAULT 'Running',
  `current_step_id` VARCHAR(255),
  `context_data` JSON,
  `started_date` DATETIME NOT NULL,
  `paused_date` DATETIME,
  `completed_date` DATETIME,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_last_modified_date` DATETIME,
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  KEY `idx_flowinstance_flow` (`flow_id`),
  KEY `idx_flowinstance_record` (`object_api_name`, `record_id`),
  KEY `idx_flowinstance_status` (`status`),
  FOREIGN KEY (`flow_id`) REFERENCES _System_Flow(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`current_step_id`) REFERENCES _System_FlowStep(__sys_gen_id) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìê Creating table: _System_Theme
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_PermissionSet
2026/01/09 10:03:12 üìê Creating table: _System_Log
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_SystemLog
2026/01/09 10:03:12 üìù Executing DDL for _System_Theme: 
CREATE TABLE IF NOT EXISTS `_System_Theme` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `is_active` TINYINT(1) NOT NULL DEFAULT 0,
  `colors` JSON NOT NULL,
  `density` VARCHAR(50) NOT NULL DEFAULT 'comfortable',
  `logo_url` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìê Creating table: _System_Recent
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_File
2026/01/09 10:03:12 üìê Creating table: _System_Config
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Notification
2026/01/09 10:03:12 üìê Creating table: _System_Validation
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Group
2026/01/09 10:03:12 üìê Creating table: _System_Flow
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_AuditLog
2026/01/09 10:03:12 üìê Creating table: _System_FlowStep
2026/01/09 10:03:12 üìù Executing DDL for _System_Log: 
CREATE TABLE IF NOT EXISTS `_System_Log` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `timestamp` DATETIME NOT NULL,
  `level` VARCHAR(50) NOT NULL,
  `source` VARCHAR(255) NOT NULL,
  `message` TEXT NOT NULL,
  `details` TEXT,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Log_timestamp` (`timestamp`),
  KEY `idx__System_Log_level` (`level`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_Recent: 
CREATE TABLE IF NOT EXISTS `_System_Recent` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `user_id` VARCHAR(255) NOT NULL,
  `object_api_name` VARCHAR(255) NOT NULL,
  `record_id` VARCHAR(255) NOT NULL,
  `record_name` VARCHAR(255) NOT NULL,
  `timestamp` DATETIME NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Recent_user_id` (`user_id`),
  KEY `idx__System_Recent_user_id_timestamp` (`user_id`, `timestamp`),
  FOREIGN KEY (`user_id`) REFERENCES _System_User(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_Validation: 
CREATE TABLE IF NOT EXISTS `_System_Validation` (
  `__sys_gen_id` VARCHAR(36) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `active` TINYINT(1) NOT NULL DEFAULT 1,
  `condition` TEXT NOT NULL,
  `error_message` VARCHAR(255) NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Validation_object_api_name` (`object_api_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_Config: 
CREATE TABLE IF NOT EXISTS `_System_Config` (
  `key_name` VARCHAR(255) NOT NULL PRIMARY KEY,
  `value` TEXT NOT NULL,
  `is_secret` TINYINT(1) NOT NULL DEFAULT 0,
  `description` TEXT NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_GroupMember
2026/01/09 10:03:12 üìê Creating table: _System_Relationship
2026/01/09 10:03:12 üìù Executing DDL for _System_Flow: 
CREATE TABLE IF NOT EXISTS `_System_Flow` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `trigger_object` VARCHAR(255) NOT NULL,
  `trigger_type` VARCHAR(50) NOT NULL,
  `trigger_condition` TEXT NOT NULL,
  `action_type` VARCHAR(50) NOT NULL,
  `action_config` JSON NOT NULL,
  `flow_type` VARCHAR(50) NOT NULL DEFAULT 'simple',
  `description` TEXT,
  `status` VARCHAR(50) NOT NULL DEFAULT 'active',
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_is_deleted` BOOLEAN NOT NULL DEFAULT 0,
  `schedule` VARCHAR(255),
  `schedule_timezone` VARCHAR(255) DEFAULT 'UTC',
  `last_run_at` DATETIME,
  `next_run_at` DATETIME,
  `is_running` BOOLEAN NOT NULL DEFAULT false,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Flow_trigger_object` (`trigger_object`),
  KEY `idx__System_Flow_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_FlowStep: 
CREATE TABLE IF NOT EXISTS `_System_FlowStep` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `flow_id` VARCHAR(255) NOT NULL,
  `step_order` INT NOT NULL DEFAULT 1,
  `step_name` VARCHAR(255) NOT NULL,
  `step_type` VARCHAR(50) NOT NULL DEFAULT 'action',
  `action_type` VARCHAR(50),
  `action_config` JSON,
  `entry_condition` TEXT,
  `on_success_step` VARCHAR(255),
  `on_failure_step` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_is_deleted` BOOLEAN NOT NULL DEFAULT 0,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx_flowstep_flow` (`flow_id`),
  KEY `idx_flowstep_order` (`flow_id`, `step_order`),
  FOREIGN KEY (`flow_id`) REFERENCES _System_Flow(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_Relationship: 
CREATE TABLE IF NOT EXISTS `_System_Relationship` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `child_object_api_name` VARCHAR(255) NOT NULL,
  `parent_object_api_name` VARCHAR(255) NOT NULL,
  `field_api_name` VARCHAR(255) NOT NULL,
  `relationship_name` VARCHAR(255) NOT NULL,
  `relationship_type` VARCHAR(50) NOT NULL DEFAULT 'Lookup',
  `cascade_delete` TINYINT(1) NOT NULL DEFAULT 0,
  `restricted_delete` TINYINT(1) NOT NULL DEFAULT 0,
  `related_list_label` VARCHAR(255) NOT NULL,
  `related_list_fields` TEXT NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Relationship_child_object_api_name` (`child_object_api_name`),
  KEY `idx__System_Relationship_parent_object_api_name` (`parent_object_api_name`),
  KEY `idx__System_Relationship_field_api_name` (`field_api_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Session
2026/01/09 10:03:12 üìê Creating table: _System_EmailTemplate
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_FlowInstance
2026/01/09 10:03:12 üìê Creating table: _System_FeedItem
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Config
2026/01/09 10:03:12 üìê Creating table: _System_RecycleBin
2026/01/09 10:03:12 üìù Executing DDL for _System_EmailTemplate: 
CREATE TABLE IF NOT EXISTS `_System_EmailTemplate` (
  `__sys_gen_id` VARCHAR(36) NOT NULL PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL UNIQUE,
  `subject` VARCHAR(255) NOT NULL,
  `html_body` TEXT NOT NULL,
  `text_body` TEXT NOT NULL,
  `from_name` VARCHAR(255) NOT NULL,
  `from_email` VARCHAR(255) NOT NULL,
  `reply_to` VARCHAR(255) NOT NULL,
  `is_active` TINYINT(1) NOT NULL DEFAULT 1,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Theme
2026/01/09 10:03:12 üìê Creating table: _System_Action
2026/01/09 10:03:12 üìù Executing DDL for _System_FeedItem: 
CREATE TABLE IF NOT EXISTS `_System_FeedItem` (
  `__sys_gen_id` VARCHAR(36) NOT NULL PRIMARY KEY,
  `parent_id` VARCHAR(36) NOT NULL,
  `type` VARCHAR(50) NOT NULL,
  `body` TEXT NOT NULL,
  `__sys_gen_created_by_id` VARCHAR(36) NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Log
2026/01/09 10:03:12 üìê Creating table: _System_ListView
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_FlowStep
2026/01/09 10:03:12 üìê Creating table: _System_SharingRule
2026/01/09 10:03:12 üìù Executing DDL for _System_RecycleBin: 
CREATE TABLE IF NOT EXISTS `_System_RecycleBin` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `record_id` VARCHAR(255) NOT NULL,
  `object_api_name` VARCHAR(255) NOT NULL,
  `record_name` VARCHAR(255) NOT NULL,
  `deleted_by` VARCHAR(255) NOT NULL,
  `deleted_date` DATETIME NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_RecycleBin_object_api_name` (`object_api_name`),
  KEY `idx__System_RecycleBin_deleted_date` (`deleted_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_Action: 
CREATE TABLE IF NOT EXISTS `_System_Action` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `label` VARCHAR(255) NOT NULL,
  `type` VARCHAR(50) NOT NULL,
  `icon` VARCHAR(255),
  `target_object` VARCHAR(255),
  `config` JSON,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Action_object_api_name` (`object_api_name`),
  UNIQUE KEY `idx__System_Action_object_api_name_name` (`object_api_name`, `name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Validation
2026/01/09 10:03:12 üìê Creating table: _System_ProfileLayout
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Flow
2026/01/09 10:03:12 üìê Creating table: _System_Layout
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Recent
2026/01/09 10:03:12 üìê Creating table: _System_SetupPage
2026/01/09 10:03:12 üìù Executing DDL for _System_ListView: 
CREATE TABLE IF NOT EXISTS `_System_ListView` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `label` VARCHAR(255) NOT NULL,
  `filter_expr` TEXT,
  `fields` JSON NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_ListView_object_api_name` (`object_api_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Relationship
2026/01/09 10:03:12 üìù Executing DDL for _System_Layout: 
CREATE TABLE IF NOT EXISTS `_System_Layout` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `config` JSON NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_Layout_object_api_name` (`object_api_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìê Creating table: _System_ObjectPerms
2026/01/09 10:03:12 üìù Executing DDL for _System_SharingRule: 
CREATE TABLE IF NOT EXISTS `_System_SharingRule` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `object_api_name` VARCHAR(255) NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `criteria` TEXT NOT NULL,
  `access_level` VARCHAR(50) NOT NULL,
  `share_with_role_id` VARCHAR(255),
  `share_with_group_id` VARCHAR(255),
  `__sys_gen_is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_owner_id` VARCHAR(255),
  `__sys_gen_created_by_id` VARCHAR(255),
  `__sys_gen_last_modified_by_id` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_SharingRule_object_api_name` (`object_api_name`),
  FOREIGN KEY (`share_with_role_id`) REFERENCES _System_Role(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`share_with_group_id`) REFERENCES _System_Group(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_ProfileLayout: 
CREATE TABLE IF NOT EXISTS `_System_ProfileLayout` (
  `profile_id` VARCHAR(255) NOT NULL,
  `object_api_name` VARCHAR(255) NOT NULL,
  `layout_id` VARCHAR(255) NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  UNIQUE KEY `idx__System_ProfileLayout_profile_id_object_api_name` (`profile_id`, `object_api_name`),
  FOREIGN KEY (`profile_id`) REFERENCES _System_Profile(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`layout_id`) REFERENCES _System_Layout(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_SetupPage: 
CREATE TABLE IF NOT EXISTS `_System_SetupPage` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `label` VARCHAR(255) NOT NULL,
  `icon` VARCHAR(255),
  `component_name` VARCHAR(255) NOT NULL,
  `category` VARCHAR(50) NOT NULL,
  `page_order` INT NOT NULL DEFAULT 99,
  `permission_required` VARCHAR(255),
  `is_enabled` BOOLEAN NOT NULL DEFAULT true,
  `description` TEXT,
  `path` VARCHAR(255),
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_SetupPage_category` (`category`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_FeedItem
2026/01/09 10:03:12 üìê Creating table: _System_FieldDependency
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_EmailTemplate
2026/01/09 10:03:12 üìù Executing DDL for _System_ObjectPerms: 
CREATE TABLE IF NOT EXISTS `_System_ObjectPerms` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `profile_id` VARCHAR(255),
  `permission_set_id` VARCHAR(255),
  `object_api_name` VARCHAR(255) NOT NULL,
  `allow_read` TINYINT(1) NOT NULL DEFAULT 0,
  `allow_create` TINYINT(1) NOT NULL DEFAULT 0,
  `allow_edit` TINYINT(1) NOT NULL DEFAULT 0,
  `allow_delete` TINYINT(1) NOT NULL DEFAULT 0,
  `view_all` TINYINT(1) NOT NULL DEFAULT 0,
  `modify_all` TINYINT(1) NOT NULL DEFAULT 0,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  UNIQUE KEY `idx__System_ObjectPerms_profile_id_object_api_name` (`profile_id`, `object_api_name`),
  UNIQUE KEY `idx_objperms_permset` (`permission_set_id`, `object_api_name`),
  FOREIGN KEY (`profile_id`) REFERENCES _System_Profile(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`permission_set_id`) REFERENCES _System_PermissionSet(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 üìù Executing DDL for _System_FieldDependency: 
CREATE TABLE IF NOT EXISTS `_System_FieldDependency` (
  `__sys_gen_id` VARCHAR(255) NOT NULL PRIMARY KEY,
  `controlling_field_id` VARCHAR(255) NOT NULL,
  `dependent_field_id` VARCHAR(255) NOT NULL,
  `controlling_value` VARCHAR(255) NOT NULL,
  `dependent_values` JSON NOT NULL,
  `__sys_gen_created_date` DATETIME NOT NULL,
  `__sys_gen_last_modified_date` DATETIME NOT NULL,
  KEY `idx__System_FieldDependency_controlling_field_id` (`controlling_field_id`),
  KEY `idx__System_FieldDependency_dependent_field_id` (`dependent_field_id`),
  FOREIGN KEY (`controlling_field_id`) REFERENCES _System_Field(__sys_gen_id) ON DELETE CASCADE,
  FOREIGN KEY (`dependent_field_id`) REFERENCES _System_Field(__sys_gen_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Action
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_RecycleBin
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_ProfileLayout
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_Layout
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_SetupPage
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_ListView
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_SharingRule
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_ObjectPerms
2026/01/09 10:03:12 ‚úÖ DDL executed successfully for _System_FieldDependency
2026/01/09 10:03:12 üì¶ Batch registering 46 tables in _System_Table...
2026/01/09 10:03:12 üìã Registering system object metadata (BATCH mode)...
2026/01/09 10:03:12    üì¶ Batch inserting 49 objects...
2026/01/09 10:03:12    üì¶ Batch inserting 526 fields...
2026/01/09 10:03:12 ‚úÖ Core system schema initialized (optimized)
2026/01/09 10:03:12 üîÑ Refreshing metadata cache...
2026/01/09 10:03:12 ‚úÖ Metadata cache refreshed: 49 objects loaded
=== RUN   TestPersistenceService_Integration/Create_Update_Delete_Record
2026/01/09 10:03:12 ‚ú® Created record 5583bcee-79cc-4b39-b3db-f94f0e2eed6b in _System_Group (User: test-admin)
    persistence_service_test.go:78: Created record: 5583bcee-79cc-4b39-b3db-f94f0e2eed6b
2026/01/09 10:03:12 üìù Updated record 5583bcee-79cc-4b39-b3db-f94f0e2eed6b in _System_Group (User: test-admin)
2026/01/09 10:03:12 üóëÔ∏è Deleted record 5583bcee-79cc-4b39-b3db-f94f0e2eed6b in _System_Group (User: test-admin)
=== RUN   TestPersistenceService_Integration/Create_Validation_Error
    persistence_service_test.go:137: Got expected validation/db error: validation error on field 'label': is required
=== RUN   TestPersistenceService_Integration/AutoNumber_Generation
2026/01/09 10:03:12 ‚ûï Adding column ticket_48aa8a1a__c to table _System_Group
2026/01/09 10:03:12    üèÅ Executing DDL: ALTER TABLE `_System_Group` ADD COLUMN `ticket_48aa8a1a__c` VARCHAR(255) DEFAULT 'T-{0000}'
2026/01/09 10:03:13    ‚úÖ DDL execution complete
2026/01/09 10:03:13    ‚úÖ Column added/registered: _System_Group.ticket_48aa8a1a__c
2026/01/09 10:03:13 üóëÔ∏è Metadata cache invalidated
2026/01/09 10:03:13 üîÑ Refreshing metadata cache...
2026/01/09 10:03:13 ‚úÖ Metadata cache refreshed: 49 objects loaded
2026/01/09 10:03:13 ‚ú® Created record 894268f5-898b-4176-8136-6b85a0b074cd in _System_Group (User: test-admin)
    persistence_service_test.go:175: Record 1 AutoNumber: T-0001
2026/01/09 10:03:13 ‚ú® Created record b833cb8b-6e91-40ea-b9b5-37cb1af2787c in _System_Group (User: test-admin)
    persistence_service_test.go:197: Record 2 AutoNumber: T-0002
2026/01/09 10:03:13 üóëÔ∏è Deleted record b833cb8b-6e91-40ea-b9b5-37cb1af2787c in _System_Group (User: test-admin)
2026/01/09 10:03:13 üóëÔ∏è Deleted record 894268f5-898b-4176-8136-6b85a0b074cd in _System_Group (User: test-admin)
--- PASS: TestPersistenceService_Integration (0.23s)
    --- PASS: TestPersistenceService_Integration/Create_Update_Delete_Record (0.02s)
    --- PASS: TestPersistenceService_Integration/Create_Validation_Error (0.00s)
    --- PASS: TestPersistenceService_Integration/AutoNumber_Generation (0.12s)
=== RUN   TestFormulaFilter_ToSQL
=== RUN   TestFormulaFilter_ToSQL/Simple_equality
    query_filter_test.go:115: ‚úÖ Filter 'status == 'Open'' -> SQL '(status = ?)' with 1 args
=== RUN   TestFormulaFilter_ToSQL/Greater_than
    query_filter_test.go:115: ‚úÖ Filter 'amount > 1000' -> SQL '(amount > ?)' with 1 args
=== RUN   TestFormulaFilter_ToSQL/Less_than_or_equal
    query_filter_test.go:115: ‚úÖ Filter 'price <= 50.5' -> SQL '(price <= ?)' with 1 args
=== RUN   TestFormulaFilter_ToSQL/Not_equal
    query_filter_test.go:115: ‚úÖ Filter 'type != 'Cancelled'' -> SQL '(type != ?)' with 1 args
=== RUN   TestFormulaFilter_ToSQL/AND_condition
    query_filter_test.go:115: ‚úÖ Filter 'status == 'Open' && amount > 500' -> SQL '((status = ?) AND (amount > ?))' with 2 args
=== RUN   TestFormulaFilter_ToSQL/OR_condition
    query_filter_test.go:115: ‚úÖ Filter 'type == 'A' || type == 'B'' -> SQL '((type = ?) OR (type = ?))' with 2 args
=== RUN   TestFormulaFilter_ToSQL/CONTAINS_function
    query_filter_test.go:115: ‚úÖ Filter 'CONTAINS(name, 'Acme')' -> SQL 'name LIKE ?' with 1 args
=== RUN   TestFormulaFilter_ToSQL/STARTS_WITH_function
    query_filter_test.go:115: ‚úÖ Filter 'STARTS_WITH(name, 'Test')' -> SQL 'name LIKE ?' with 1 args
=== RUN   TestFormulaFilter_ToSQL/ENDS_WITH_function
    query_filter_test.go:115: ‚úÖ Filter 'ENDS_WITH(email, '.com')' -> SQL 'email LIKE ?' with 1 args
=== RUN   TestFormulaFilter_ToSQL/Empty_filter
    query_filter_test.go:88: ‚úÖ Empty filter handled correctly
=== RUN   TestFormulaFilter_ToSQL/Invalid_syntax
    query_filter_test.go:98: ‚úÖ Invalid syntax correctly rejected: failed to parse expression: unexpected token Operator("==") (1:11)
         | status == == 'Open'
         | ..........^
--- PASS: TestFormulaFilter_ToSQL (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/Simple_equality (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/Greater_than (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/Less_than_or_equal (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/Not_equal (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/AND_condition (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/OR_condition (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/CONTAINS_function (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/STARTS_WITH_function (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/ENDS_WITH_function (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/Empty_filter (0.00s)
    --- PASS: TestFormulaFilter_ToSQL/Invalid_syntax (0.00s)
=== RUN   TestFormulaFilter_StringFunctions
=== RUN   TestFormulaFilter_StringFunctions/CONTAINS_pattern
    query_filter_test.go:137: ‚úÖ CONTAINS produces correct LIKE pattern: SQL='name LIKE ?', pattern='%Acme%'
=== RUN   TestFormulaFilter_StringFunctions/STARTS_WITH_pattern
    query_filter_test.go:156: ‚úÖ STARTS_WITH produces correct LIKE pattern: SQL='name LIKE ?', pattern='Test%'
=== RUN   TestFormulaFilter_StringFunctions/ENDS_WITH_pattern
    query_filter_test.go:175: ‚úÖ ENDS_WITH produces correct LIKE pattern: SQL='email LIKE ?', pattern='%.com'
--- PASS: TestFormulaFilter_StringFunctions (0.00s)
    --- PASS: TestFormulaFilter_StringFunctions/CONTAINS_pattern (0.00s)
    --- PASS: TestFormulaFilter_StringFunctions/STARTS_WITH_pattern (0.00s)
    --- PASS: TestFormulaFilter_StringFunctions/ENDS_WITH_pattern (0.00s)
=== RUN   TestRoleHierarchy_ManagerVisibility
=== RUN   TestRoleHierarchy_ManagerVisibility/Rep_can_access_own_record
=== RUN   TestRoleHierarchy_ManagerVisibility/Manager_can_read_subordinate_record
=== RUN   TestRoleHierarchy_ManagerVisibility/VP_can_read_subordinate_record_(2_levels_down)
=== RUN   TestRoleHierarchy_ManagerVisibility/CEO_can_read_any_subordinate_record
=== RUN   TestRoleHierarchy_ManagerVisibility/Rep_cannot_read_Manager_record
=== RUN   TestRoleHierarchy_ManagerVisibility/Sibling_cannot_read_peer_record
=== RUN   TestRoleHierarchy_ManagerVisibility/Manager_cannot_edit_subordinate_record_via_hierarchy
=== NAME  TestRoleHierarchy_ManagerVisibility
    role_hierarchy_test.go:150: ‚úÖ Role Hierarchy tests completed successfully
--- PASS: TestRoleHierarchy_ManagerVisibility (0.02s)
    --- PASS: TestRoleHierarchy_ManagerVisibility/Rep_can_access_own_record (0.00s)
    --- PASS: TestRoleHierarchy_ManagerVisibility/Manager_can_read_subordinate_record (0.00s)
    --- PASS: TestRoleHierarchy_ManagerVisibility/VP_can_read_subordinate_record_(2_levels_down) (0.00s)
    --- PASS: TestRoleHierarchy_ManagerVisibility/CEO_can_read_any_subordinate_record (0.00s)
    --- PASS: TestRoleHierarchy_ManagerVisibility/Rep_cannot_read_Manager_record (0.00s)
    --- PASS: TestRoleHierarchy_ManagerVisibility/Sibling_cannot_read_peer_record (0.00s)
    --- PASS: TestRoleHierarchy_ManagerVisibility/Manager_cannot_edit_subordinate_record_via_hierarchy (0.00s)
=== RUN   TestSecurityValidator_ValidateAndRewrite
=== RUN   TestSecurityValidator_ValidateAndRewrite/Permissions:_Block_Table_Access
=== RUN   TestSecurityValidator_ValidateAndRewrite/Permissions:_Block_Field_Access
=== RUN   TestSecurityValidator_ValidateAndRewrite/RLS:_Standard_User_-_Inject_Owner_Filter
=== RUN   TestSecurityValidator_ValidateAndRewrite/RLS:_Admin_User_-_No_injection
=== RUN   TestSecurityValidator_ValidateAndRewrite/RLS:_Object_without_Owner_-_No_injection
=== RUN   TestSecurityValidator_ValidateAndRewrite/Complex_Join_-_Skip_RLS_(Current_Limitation)
--- PASS: TestSecurityValidator_ValidateAndRewrite (0.00s)
    --- PASS: TestSecurityValidator_ValidateAndRewrite/Permissions:_Block_Table_Access (0.00s)
    --- PASS: TestSecurityValidator_ValidateAndRewrite/Permissions:_Block_Field_Access (0.00s)
    --- PASS: TestSecurityValidator_ValidateAndRewrite/RLS:_Standard_User_-_Inject_Owner_Filter (0.00s)
    --- PASS: TestSecurityValidator_ValidateAndRewrite/RLS:_Admin_User_-_No_injection (0.00s)
    --- PASS: TestSecurityValidator_ValidateAndRewrite/RLS:_Object_without_Owner_-_No_injection (0.00s)
    --- PASS: TestSecurityValidator_ValidateAndRewrite/Complex_Join_-_Skip_RLS_(Current_Limitation) (0.00s)
=== RUN   TestSharingRules_Integration
=== RUN   TestSharingRules_Integration/Sales_User_Access_to_Tech_Record
=== RUN   TestSharingRules_Integration/Sales_User_Access_to_Non-Tech_Record
=== RUN   TestSharingRules_Integration/Marketing_User_Access_to_Tech_Record
=== RUN   TestSharingRules_Integration/Sales_User_Edit_Access
=== RUN   TestSharingRules_Integration/Owner_Access
=== RUN   TestSharingRules_Integration/Marketing_User_No_Access
=== RUN   TestSharingRules_Integration/Marketing_user_can_edit_any_Account_record_(Edit_access,_no_criteria)
=== NAME  TestSharingRules_Integration
    sharing_rules_test.go:211: ‚úÖ Sharing Rules tests completed successfully
--- PASS: TestSharingRules_Integration (0.02s)
    --- PASS: TestSharingRules_Integration/Sales_User_Access_to_Tech_Record (0.00s)
    --- PASS: TestSharingRules_Integration/Sales_User_Access_to_Non-Tech_Record (0.00s)
    --- PASS: TestSharingRules_Integration/Marketing_User_Access_to_Tech_Record (0.00s)
    --- PASS: TestSharingRules_Integration/Sales_User_Edit_Access (0.00s)
    --- PASS: TestSharingRules_Integration/Owner_Access (0.00s)
    --- PASS: TestSharingRules_Integration/Marketing_User_No_Access (0.00s)
    --- PASS: TestSharingRules_Integration/Marketing_user_can_edit_any_Account_record_(Edit_access,_no_criteria) (0.00s)
=== RUN   TestValidationRule_DateComparison
    validation_date_test.go:49: Got expected past date error: validation error: Close Date cannot be in the past
--- PASS: TestValidationRule_DateComparison (0.00s)
=== RUN   TestValidationRule_MissingField
    validation_repro_test.go:52: Validation error (as expected?): validation error: Close Date required
--- PASS: TestValidationRule_MissingField (0.00s)
=== RUN   TestValidationRule_Malformed
    validation_repro_test.go:85: Got expected system error: internal error: Validation rule '' failed to evaluate (caused by: unknown name NON_EXISTENT_FUNC (1:1)
         | NON_EXISTENT_FUNC() == true
         | ^)
--- PASS: TestValidationRule_Malformed (0.00s)
=== RUN   TestValidationRule_EmptyStringSyntax
=== RUN   TestValidationRule_EmptyStringSyntax/Empty_String_Check_(==_"")
=== RUN   TestValidationRule_EmptyStringSyntax/Nil_Check_(==_nil)_with_String
=== RUN   TestValidationRule_EmptyStringSyntax/Nil_Check_(==_nil)_with_Nil
=== RUN   TestValidationRule_EmptyStringSyntax/Combined_Check
=== RUN   TestValidationRule_EmptyStringSyntax/Len_Check
--- PASS: TestValidationRule_EmptyStringSyntax (0.00s)
    --- PASS: TestValidationRule_EmptyStringSyntax/Empty_String_Check_(==_"") (0.00s)
    --- PASS: TestValidationRule_EmptyStringSyntax/Nil_Check_(==_nil)_with_String (0.00s)
    --- PASS: TestValidationRule_EmptyStringSyntax/Nil_Check_(==_nil)_with_Nil (0.00s)
    --- PASS: TestValidationRule_EmptyStringSyntax/Combined_Check (0.00s)
    --- PASS: TestValidationRule_EmptyStringSyntax/Len_Check (0.00s)
FAIL
FAIL	github.com/nexuscrm/backend/internal/application/services	1.645s
FAIL
